parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"tCsr":[function(require,module,exports) {
"use strict";function e(e,t,r){return r=e.createShader(r),e.shaderSource(r,t),e.compileShader(r),r}function t(t,r,n){var i=t.createProgram();return r=e(t,r,35633),n=e(t,n,35632),t.attachShader(i,r),t.attachShader(i,n),t.linkProgram(i),i}function r(e,t,r,n){var i=e.createBuffer();return e.bindBuffer(t,i),e.bufferData(t,r,n),i}function n(e,t,r,n){var i=e.createTexture();return e.bindTexture(3553,i),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071),e.texParameteri(3553,10240,9728),e.texParameteri(3553,10241,9728),e.texImage2D(3553,0,6408,6408,5121,t),e.bindTexture(3553,null),i.width=r,i.height=n,i}function i(e){var n,i,a,o=0,b=e.getContext("webgl"),c=e.width,u=e.height,f=t(b,"precision lowp float;\nattribute float a;\nattribute vec2 b,c,d,e;\nattribute vec4 f;\nvarying vec2 g;\nvarying vec4 h;\nuniform mat4 i;\nvoid main() {\nfloat q=cos(a);\nfloat w=sin(a);\ngl_Position=i*vec4(((vec2(d.x*q-d.y*w,d.x*w+d.y*q)*c)+b),1.0,1.0);\ng=e;\nh=f;\n}","precision lowp float;\nvarying vec2 g;\nvarying vec4 h;\nuniform sampler2D j;\nvoid main(){\ngl_FragColor=texture2D(j,g)*h;\n}"),l=b.bufferSubData.bind(b),d=b.drawElements.bind(b),g=b.bindTexture.bind(b),x=new ArrayBuffer(1747520),v=new Float32Array(x),A=new Uint32Array(x),h=new Uint16Array(131064),y=r(b,34963,h.byteLength,35044),w=r(b,34962,x.byteLength,35048),m=0,s=null,P=null;for(b.blendFunc(770,771),b.enable(3042),b.useProgram(f),b.bindBuffer(34963,y),y=o=0;65532>y;y+=6,o+=4)h[y+0]=o,h[y+1]=o+1,h[y+2]=o+2,h[y+3]=o+0,h[y+4]=o+3,h[y+5]=o+1;return b.bufferSubData(34963,0,h),b.bindBuffer(34962,w),h=b.getAttribLocation(f,"a"),w=b.getAttribLocation(f,"b"),y=b.getAttribLocation(f,"c"),n=b.getAttribLocation(f,"d"),i=b.getAttribLocation(f,"e"),a=b.getAttribLocation(f,"f"),b.enableVertexAttribArray(h),b.vertexAttribPointer(h,1,5126,0,40,0),b.enableVertexAttribArray(w),b.vertexAttribPointer(w,2,5126,0,40,4),b.enableVertexAttribArray(y),b.vertexAttribPointer(y,2,5126,0,40,12),b.enableVertexAttribArray(n),b.vertexAttribPointer(n,2,5126,0,40,20),b.enableVertexAttribArray(i),b.vertexAttribPointer(i,2,5126,0,40,28),b.enableVertexAttribArray(a),b.vertexAttribPointer(a,4,5121,1,40,36),b.uniformMatrix4fv(b.getUniformLocation(f,"i"),0,new Float32Array([2/c,0,0,0,0,-2/u,0,0,0,0,1,1,-1,1,0,0])),b.activeTexture(33984),P={g:b,c:e,col:4294967295,bkg:function(e,t,r){b.clearColor(e,t,r,1)},cls:function(){b.clear(16384)},img:function(e,t,r,n,i,a,o,b,c,u,f,h,y,w){var T=t+n,p=r+i;i=r+i,n=t+n;var L=P.col;(e!=s||10922<=m+1)&&(l(34962,0,x),d(4,6*m,5123,0),m=0,e!=s&&g(3553,s=e)),e=40*m,v[e++]=a,v[e++]=o,v[e++]=b,v[e++]=c,v[e++]=u,v[e++]=t,v[e++]=r,v[e++]=f,v[e++]=h,A[e++]=L,v[e++]=a,v[e++]=o,v[e++]=b,v[e++]=c,v[e++]=u,v[e++]=T,v[e++]=p,v[e++]=y,v[e++]=w,A[e++]=L,v[e++]=a,v[e++]=o,v[e++]=b,v[e++]=c,v[e++]=u,v[e++]=t,v[e++]=i,v[e++]=f,v[e++]=w,A[e++]=L,v[e++]=a,v[e++]=o,v[e++]=b,v[e++]=c,v[e++]=u,v[e++]=n,v[e++]=r,v[e++]=y,v[e++]=h,A[e++]=L,10922<=++m&&(l(34962,0,x),d(4,6*m,5123,0),m=0)},flush:function(){0!=m&&(l(34962,0,v.subarray(0,40*m)),d(4,6*m,5123,0),m=0)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TCTex=n,exports.TS=i,window.TCShd=e,window.TCPrg=t,window.TCBuf=r;
},{}],"SSig":[function(require,module,exports) {
module.exports="kittens.0468b347.png";
},{}],"gyxK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameObject=void 0;class t{constructor(t,i,h,s,e){this.positionX=t,this.positionY=i,this.width=s,this.height=e,this.rotation=0,this.texture=h,this.currentFrame=0,this.maxFrames=this.texture.height/this.height|0,this.setFrame(0,0),this.animate(10)}update(){}setFrame(t,i){this.u0=t*this.width/this.texture.width,this.v0=i*this.height/this.texture.height,this.u1=this.u0+this.width/this.texture.width,this.v1=this.v0+this.height/this.texture.height}animate(){this.currentFrame=(this.currentFrame+1)%this.maxFrames,this.setFrame(0,this.currentFrame)}draw(t){t.img(this.texture,-this.width/2,-this.height/2,this.width,this.height,this.rotation,this.positionX,this.positionY,1,1,this.u0,this.v0,this.u1,this.v1)}}exports.GameObject=t;
},{}],"IAoy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var e=require("./gameobject");class t extends e.GameObject{constructor(e,t,r,s,o){super(e,t,r,s,o),this.rotation=-90*Math.PI/180}}exports.Player=t;
},{"./gameobject":"gyxK"}],"OeVs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tower=void 0;var e=require("./gameobject");class t extends e.GameObject{constructor(e,t,s,i,h,r){super(e,t,s,i,h),this.speed=2,this.u0=0/s.width,this.v0=r/s.height,this.u1=this.u0+i/s.width,this.v1=this.v0+h/s.height}animate(){}update(){this.positionY+=this.speed}}exports.Tower=t;
},{"./gameobject":"gyxK"}],"HPsM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var t=require("./components/player"),e=require("./components/tower");class s{constructor(s,a){this.canvas=s,this.gameObjects=[],this.gameObjects.push(new t.Player(s.c.width/4*3-32,s.c.height/4*3,a.kitten,32,32));for(let t=0;t<500;t+=1){const i=new e.Tower(s.c.width/4*3,32*-t+s.c.height,a.kitten,32,32,t%4*32);this.gameObjects.push(i)}s.bkg(.227,.227,.227),this.update(),this.animate(5),this.mainLoop()}animate(t){setInterval(()=>{this.gameObjects.forEach(t=>{t.animate()})},1e3/t)}update(){this.gameObjects.forEach(t=>{t.update()})}draw(){this.canvas.cls(),this.gameObjects.forEach(t=>{t.draw(this.canvas)}),this.canvas.flush()}mainLoop(){requestAnimationFrame(this.mainLoop.bind(this)),this.update(),this.draw()}}exports.Game=s;
},{"./components/player":"IAoy","./components/tower":"OeVs"}],"H99C":[function(require,module,exports) {
"use strict";var e=require("./libs/ts"),t=r(require("./assets/kittens.png")),n=require("./game");function r(e){return e&&e.__esModule?e:{default:e}}const o=document.getElementById("game-canvas");o.width=window.innerWidth,o.height=window.innerHeight;const s=(0,e.TS)(o),i={kitten:t.default},c=e=>{console.log(e)};let a=null;o.addEventListener("touchstart",e=>{a={x:e.touches[0].clientX,y:e.touches[0].clientY}}),o.addEventListener("touchend",e=>{const t={x:e.changedTouches[0].clientX-a.x,y:e.changedTouches[0].clientY-a.y};a=null;const n=Math.abs(t.x)/Math.abs(t.y),r=Math.abs(n);Math.hypot(t.x,t.y)<50||r>.9&&r<1.1||c(r>1?t.x<0?"left":"right":t.y<0?"up":"down")}),window.addEventListener("keydown",e=>{const t={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",KeyW:"up",KeyS:"down",KeyA:"left",KeyD:"right"}[e.code];c(t)});const d=e=>new Promise((t,n)=>{const r=new Image;r.addEventListener("load",()=>t(r)),r.addEventListener("error",e=>n(e)),r.src=e}),h=async([t,n])=>{const r=await d(n);return[t,(0,e.TCTex)(s.g,r,r.width,r.height)]};Promise.all(Object.entries(i).map(h)).then(e=>Object.fromEntries(e)).then(e=>{new n.Game(s,e)}).catch(e=>{console.error(e)});
},{"./libs/ts":"tCsr","./assets/kittens.png":"SSig","./game":"HPsM"}]},{},["H99C"], null)
//# sourceMappingURL=src.ab671872.js.map